#!/bin/bash
#----------------------------------------------------------------------
# Don't do anything when not running interactively
#----------------------------------------------------------------------
[ -z "$PS1" ] && return
#-------------------------------------------------------------------------------
# Color management
#-------------------------------------------------------------------------------
echo "Operating system: " ${OSTYPE}
if [[ $OSTYPE =~ "darwin" ]]; then
    export CLICOLOR=1
    export LSCOLORS=GxFxBxDxCxegedabagacad
    export TERM=xterm-256color
    source ~/git/dotfiles/color/base16-shell/base16-atelierdune.dark.sh
    alias me='source ~/.bash_profile'
    alias la='ls -A'
    alias ll='ls -lahG'
    alias vim='mvim -v'
    function mom() {
      source ~/git/dotfiles/color/base16-shell/base16-$1.dark.sh
    }
elif [[ $OSTYPE =~ "linux" ]]; then
    export TERM=xterm
    source ~/git/dotfiles/color/base16-gnome-terminal/base16-atelierdune.dark.sh
    alias me='source ~/.bashrc'
    alias la='ls -A --color'
    alias ll='ls -lahG --color'
else
    echo "Unknown operating system:" ${OSTYPE}
fi
#-------------------------------------------------------------------------------
# Use vim keybinds
#-------------------------------------------------------------------------------
#set -o vi

#-------------------------------------------------------------------------------
# Personal aliases
#-------------------------------------------------------------------------------
# General
alias atf='cd ~/git/smart-device-sw/doc/automated-test'
alias cemacs='emacs -Q -l ~/git/emacs-haskell-config/init.el'
alias ci='cabal install'
alias cif='cabal install --force-reinstalls'
alias cls='clear'
alias ct='cd ~/git/dotfiles/color/base16-shell && ./colortest && cd -'
alias decrypt='~/git/dotfiles/decrypt'
alias dot='cd ~/git/dotfiles/'
alias ds='~/git/smart-device-sw/tools/bin/dev-shell'
alias ec='emacsclient -c'
alias encrypt='~/git/dotfiles/encrypt'
alias et='emacsclient -t'
alias h='history'

# Grep.
alias egrep='egrep --color=auto'
alias fgrep='fgrep --color=auto'
alias grep='grep --color=auto'
#------------------------------------------------------------------------------- 
# File & String related functions
#------------------------------------------------------------------------------- 
function ff()  { find . -type f -iname "$1" -print ; }
function ffr() { find . -name "$1" -exec bash -c 'rm -rf' \;; } 
#-------------------------------------------------------------------------------
# Use vim to read man pages.
#-------------------------------------------------------------------------------k
function man() { vim -c "Man $1 $2" -c 'silent only' ; }
function apdf() {
  f=$(basename "$1")
  f="${f%.*}"
  asciidoctor --require asciidoctor-pdf \
              --backend pdf \
              --attribute pdf-style=basic-theme.yml \
              --out-file pdf/"$f".pdf \
              "$1" ;
}
#-------------------------------------------------------------------------------
# Prompt
#-------------------------------------------------------------------------------
export PS1='\[\033[01;31m\]\u\[\033[00m\]\[\033[01;33m\]@\[\033[00m\]\[\033[01;34m\]\h\[\033[00m\]\[\033[01;32m\]:\[\033[00m\]\[\033[01;35m\]\w\[\033[00m\]\[\033[01;36m\]\n\$\[\033[00m\] '

#----------------------------------------------------------------------
# Load RVM into a shell session *as a function*
#----------------------------------------------------------------------
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"

#----------------------------------------------------------------------
# MYPATH will take precedence.
#----------------------------------------------------------------------
HASKELL_LIB=/Library/Haskell/ghc-7.8.3/lib
MYPATH=$HOME/Library/Haskell/ghc-7.8.3/lib/ghc-mod-5.3.0.0/bin:$MYPATH
MYPATH=$HOME/Library/Haskell/ghc-7.8.3/lib/structured-haskell-mode-1.0.4/bin:$MYPATH
MYPATH=$HOME/Library/Haskell/ghc-7.8.3/lib/ghci-ng-7.8.3/bin:$MYPATH
MYPATH=$HOME/Library/Haskell/ghc-7.8.3/lib/hindent-4.0/bin:$MYPATH
MYPATH=$HOME/Library/Haskell/ghc-7.8.3/lib/haskell-docs-4.2.2/bin:$MYPATH
MYPATH=$HOME/Library/Haskell/bin:$MYPATH
MYPATH=~/.cabal/bin:$MYPATH
MYPATH=/usr/local/bin:$MYPATH
PATH=$MYPATH:$PATH

#----------------------------------------------------------------------
# Disable featrues / programs running on OSX.
#----------------------------------------------------------------------
function msa() { Launchctl remove com.microsoft.SyncServicesAgent ; }
function pah() { defaults write -g ApplePressAndHoldEnable -bool false ; }

#----------------------------------------------------------------------
# Set terminal title.
#----------------------------------------------------------------------
function title() { echo -n -e "\033]0;$1\007"; }
